server {
  listen 80;
  location = /health { return 200 "ok"; add_header Content-Type text/plain; }
  location /v1/ {
    proxy_pass http://planner:9090/v1/;
    proxy_http_version 1.1;
    proxy_connect_timeout 5s;
    proxy_send_timeout 30s;
    proxy_read_timeout 30s;
    send_timeout 30s;
    client_max_body_size 5m;
    proxy_set_header Host System.Management.Automation.Internal.Host.InternalHost;
    proxy_set_header X-Real-IP ;
    proxy_set_header X-Forwarded-For ;
    proxy_set_header X-Forwarded-Proto ;
  }
}

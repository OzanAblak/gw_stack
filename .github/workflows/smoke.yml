name: smoke
on:
  workflow_dispatch:
  push:
    branches: [main]


jobs:
  smoke:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - run: echo "smoke ok"
  - name: Prepare artifact
    shell: bash
    run: |
      set -euo pipefail
      mkdir -p out
      echo "build $(date -u +%Y-%m-%dT%H:%M:%SZ)" > out/placeholder.txt

  - name: Upload artifact
    uses: actions/upload-artifact@v4
    with:
      name: smoke_artifact
      path: out/placeholder.txt
      if-no-files-found: error
      retention-days: 14
